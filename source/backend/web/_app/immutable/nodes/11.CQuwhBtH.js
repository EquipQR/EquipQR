import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{f as y,p as le,Q as q,a as ne,c as o,a4 as r,r as i,a3 as B,a1 as de,B as me,al as A,g as s,a7 as J,a6 as m}from"../chunks/Cz8b3aZ3.js";import{a as K}from"../chunks/BJQCchKY.js";import{c as V,a,f as u,t as ue}from"../chunks/C2w1fM-E.js";import{i as O}from"../chunks/BddMa5fM.js";import{e as ce}from"../chunks/CiHTc1pK.js";import{p as pe}from"../chunks/CWmzcjye.js";import{i as fe}from"../chunks/BXKlKvRW.js";import{l as ve,s as _e,p as ge}from"../chunks/CgaBgbAm.js";import{B as L}from"../chunks/CRTrzSdk.js";import{C as be,a as $e}from"../chunks/DlvycHRX.js";import{C as xe,a as he}from"../chunks/TnuODhjZ.js";import{I as U}from"../chunks/B-SOKpep.js";import{T as ye,c as Ie}from"../chunks/3tRLLz99.js";import{S as we}from"../chunks/BH3sRkVx.js";import{S as Se}from"../chunks/CWZfwNN4.js";import{g as qe}from"../chunks/CUAbeyJP.js";import{A as ke}from"../chunks/kFzVddHn.js";import{s as Pe}from"../chunks/DZHvi5XP.js";import{I as ze}from"../chunks/CCR3IwVy.js";function Ce(g,b){const c=ve(b,["children","$$slots","$$events","$$legacy"]),p=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];ze(g,_e({name:"send"},()=>c,{get iconNode(){return p},children:(l,k)=>{var e=V(),P=y(e);Pe(P,b,"default",{}),a(l,e)},$$slots:{default:!0}}))}function De({url:g}){return{equipmentId:g.searchParams.get("scanned")}}const it=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));var Me=u("<!> ",1),Te=u('<p class="text-red-600 text-sm"> </p>'),je=u('<p class="text-green-600 text-sm">Issue submitted successfully.</p>'),Ne=u('<form class="space-y-5"><div class="space-y-1"><label for="title" class="block text-sm font-medium text-muted-foreground">Title</label> <!></div> <div class="space-y-1"><label for="description" class="block text-sm font-medium text-muted-foreground">Description</label> <!></div> <div class="space-y-1"><label for="progress" class="block text-sm font-medium text-muted-foreground">Progress</label> <!></div> <!> <!> <!></form>'),Be=u('<!> <p class="text-sm text-muted-foreground">No equipment selected.</p>',1),Ae=u("<!> <!> <!>",1),Oe=u('<div class="relative w-full"><div class="relative w-full h-[200px] sm:h-[240px] md:h-[280px] bg-muted flex items-center justify-center"><div class="absolute top-4 left-4 z-10"><!></div> <h1 class="text-xl md:text-2xl font-semibold text-white z-10">Submit New Issue</h1></div> <div class="mt-6 max-w-2xl mx-auto px-4"><!></div></div>');function lt(g,b){le(b,!1);let c=ge(b,"data",8),p=q(!1),l=q(null),k=q(!1);const e=q({title:"",description:"",progress:"new",equipment_id:c().equipmentId??""});async function P(){var x;console.log("[submitIssue] ⚙️ Submit function called");const f=s(e).title.trim(),I=s(e).description.trim(),$=(x=s(e).equipment_id)==null?void 0:x.trim();if(!f||!I){m(l,"Title and description are required."),console.warn("[submitIssue] ❌ Missing title/description");return}if(!$){m(l,"Missing equipment ID."),console.warn("[submitIssue] ❌ Missing equipmentId");return}m(p,!0),m(l,null);try{const n={title:f,description:I,equipmentId:$};console.log("[submitIssue] 📦 Sending payload:",n);const D=await Ie(n);console.log("[submitIssue] ✅ Server response:",D),m(k,!0)}catch(n){console.error("[submitIssue] ❌ Error:",n),m(l,n.message??"Failed to submit issue.")}finally{m(p,!1)}}fe();var z=Oe(),C=o(z),E=o(C),W=o(E);L(W,{variant:"ghost",size:"icon",class:"bg-black/60 text-white hover:bg-black/80",onclick:async()=>{qe(`/equipment?scanned=${c().equipmentId}`)},children:(f,I)=>{ke(f,{class:"w-5 h-5"})},$$slots:{default:!0}}),i(E),B(2),i(C);var F=r(C,2),X=o(F);be(X,{class:"border border-border bg-background shadow-md",children:(f,I)=>{var $=Ae(),x=y($);xe(x,{class:"px-6 pb-0",children:(M,Y)=>{he(M,{class:"text-2xl font-bold",children:(w,Q)=>{B();var T=ue("Report an Issue");a(w,T)},$$slots:{default:!0}})},$$slots:{default:!0}});var n=r(x,2);Se(n,{});var D=r(n,2);$e(D,{class:"px-6 py-6 space-y-6",children:(M,Y)=>{var w=V(),Q=y(w);{var T=v=>{var d=Ne(),h=o(d),ee=r(o(h),2);U(ee,{id:"title",placeholder:"Short summary",get value(){return s(e).title},set value(t){A(e,s(e).title=t)},$$legacy:!0}),i(h);var j=r(h,2),te=r(o(j),2);ye(te,{id:"description",rows:5,placeholder:"Detailed issue description",get value(){return s(e).description},set value(t){A(e,s(e).description=t)},$$legacy:!0}),i(j);var N=r(j,2),se=r(o(N),2);U(se,{id:"progress",placeholder:"e.g., new, in progress, resolved",get value(){return s(e).progress},set value(t){A(e,s(e).progress=t)},$$legacy:!0}),i(N);var R=r(N,2);L(R,{type:"submit",get disabled(){return s(p)},class:"w-full justify-center text-sm font-medium gap-2 py-3",children:(t,_)=>{var S=Me(),H=y(S);Ce(H,{class:"w-4 h-4"});var ie=r(H);J(()=>K(ie,` ${s(p)?"Submitting...":"Submit Issue"}`)),a(t,S)},$$slots:{default:!0}});var G=r(R,2);{var re=t=>{var _=Te(),S=o(_,!0);i(_),J(()=>K(S,s(l))),a(t,_)};O(G,t=>{s(l)&&t(re)})}var ae=r(G,2);{var oe=t=>{var _=je();a(t,_)};O(ae,t=>{s(k)&&t(oe)})}i(d),ce("submit",d,pe(P)),a(v,d)},Z=v=>{var d=Be(),h=y(d);we(h,{class:"h-5 w-3/5"}),B(2),a(v,d)};O(Q,v=>{de(c()),me(()=>c().equipmentId)?v(T):v(Z,!1)})}a(M,w)},$$slots:{default:!0}}),a(f,$)},$$slots:{default:!0}}),i(F),i(z),a(g,z),ne()}export{lt as component,it as universal};
