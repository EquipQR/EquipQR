import{r as Re}from"../chunks/Ci7b-n0Y.js";import{g as je,r as Me,l as Ue,w as Be}from"../chunks/BM8bzlRp.js";import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{o as Je}from"../chunks/DFFYA4bw.js";import{p as Ne,a as Ae,a4 as s,c as p,f as J,a6 as t,g as e,Q as f,D as De,a3 as _,r as u,B as ye,a7 as ee,a8 as He}from"../chunks/Cz8b3aZ3.js";import{a as te}from"../chunks/BJQCchKY.js";import{i as I}from"../chunks/BddMa5fM.js";import{e as ke,i as Pe}from"../chunks/B6heVWRr.js";import{f as g,a as r,t as h,c as Ke,d as Qe}from"../chunks/C2w1fM-E.js";import{d as ze}from"../chunks/CiHTc1pK.js";import{i as Fe}from"../chunks/BXKlKvRW.js";import{T as Ye,a as Ge,b as Se,c as Te}from"../chunks/BrpJ24Se.js";import{C as Ve}from"../chunks/Ddy29Q8t.js";import{I as ae}from"../chunks/B-SOKpep.js";import{B as ie}from"../chunks/CRTrzSdk.js";import{L as Y}from"../chunks/lYph8gKm.js";import{S as We}from"../chunks/CWZfwNN4.js";async function Xe({fetch:G}){try{await je(G)}catch{return}throw Re(302,"/")}const Ot=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"}));var Ze=g("<!> <!>",1),et=(G,V,N,c)=>{t(V,e(N)),t(c,"")},tt=(G,V,N)=>{const c="equipqr_recent_emails",S=localStorage.getItem(c),T=(S?JSON.parse(S):[]).filter(D=>D!==e(V));localStorage.setItem(c,JSON.stringify(T)),t(N,T)},at=g('<div class="flex w-full items-center justify-between bg-neutral-900 border border-neutral-800 rounded-md px-4 py-2"><button type="button" class="text-left text-sm font-mono lowercase text-white truncate"> </button> <button type="button" class="text-neutral-500 hover:text-red-400 text-xs ml-4">Remove</button></div>'),rt=g('<div class="space-y-2 w-full"><!> <div class="flex flex-col gap-2 w-full"></div></div>'),st=g('<p class="text-sm error-text"> </p>'),ot=g('<!> <div class="space-y-2 pt-4"><!> <!> <!></div> <!>',1),lt=g('<div class="flex justify-center items-center h-20"><svg class="h-6 w-6 animate-spin text-neutral-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v4m0 8v4m4-4h4m-16 0H4m1.64-5.64l2.83 2.83m8.48 0l2.83-2.83M6.34 6.34l2.83 2.83m8.48 0l2.83-2.83"></path></svg></div>'),it=g('<p class="text-sm error-text"> </p>'),nt=Qe('<svg class="h-4 w-4 animate-spin" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12a8 8 0 018-8"></path></svg>'),dt=g('<div class="space-y-2"><!> <!> <!></div> <!>',1),ct=g('<!> <!> <p class="text-center text-sm text-neutral-500">Choose another way to login</p> <div class="flex flex-col gap-2"></div>',1),ut=g('<p class="text-sm error-text"> </p>'),vt=g('<div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="flex items-center space-x-2 pt-2"><!> <label for="tos" class="text-sm text-neutral-400">I agree to the <a href="https://legal.equipqr.io/tos" target="_blank" class="underline hover:text-white">Terms of Service</a></label></div> <!> <!>',1),pt=g("<!> <!> <!>",1),gt=g('<div class="dark min-h-screen flex items-center justify-center bg-black px-4 py-12 text-white"><div class="w-full max-w-md bg-black rounded-xl shadow-2xl p-8 space-y-6 border border-neutral-800"><div class="text-center space-y-1"><img src="/app_logo_512_412.png" alt="EquipQR Logo" class="mx-auto h-32 w-auto"/></div> <!></div></div>');function Rt(G,V){Ne(V,!1);let N=f("login"),c=f(""),S=f(""),A=f(""),T=f(""),D=f(""),re=f(!1),C=f("email"),n=f(""),x=f(""),O=f(!1),Ee=[{id:"magic_link",label:"Sign in with Magic Link"},{id:"hardware_token",label:"Sign in with Hardware Token"},{id:"sso_internal",label:"Internal SSO Login"},{id:"ldap",label:"LDAP Credentials"}];const Le=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,qe=/[!@#$%^&*(),.?":{}|<>]/;function ne(o){return Le.test(o)}function me(o){return o.length>=8&&qe.test(o)}function fe(o){const H="equipqr_recent_emails",W=localStorage.getItem(H),se=W?JSON.parse(W):[],oe=[o,...se.filter(ue=>ue!==o)].slice(0,5);localStorage.setItem(H,JSON.stringify(oe))}function Ie(){const H=localStorage.getItem("equipqr_recent_emails");return H?JSON.parse(H):[]}let R=f([]);Je(()=>{t(R,Ie()),e(R).length>0&&!e(c)&&t(c,e(R)[0])});async function _e(){if(t(n,""),!e(c).trim()){t(n,"Email is required.");return}if(!ne(e(c))){t(n,"Invalid email address.");return}t(C,"loading"),await new Promise(o=>setTimeout(o,200)),t(C,"password")}async function he(){if(await He(),t(n,""),t(O,!0),!e(S)){t(n,"Password is required."),t(O,!1);return}if(!me(e(S))){t(n,"Password must be at least 8 characters and include a special character."),t(O,!1);return}try{await Ue(e(c),e(S)),fe(e(c))}catch(o){t(n,o.message)}t(O,!1)}async function xe(){if(t(x,""),!e(A)||e(A).length<3){t(x,"Username must be at least 3 characters long.");return}if(!ne(e(T))){t(x,"Please enter a valid email address.");return}if(!me(e(D))){t(x,"Password must be at least 8 characters and include a special character.");return}if(!e(re)){t(x,"You must agree to the Terms of Service.");return}try{await Me(e(A),e(T),e(D)),fe(e(T))}catch(o){t(x,o.message)}}async function $e(o){o.key==="Enter"&&(e(C)==="email"?await _e():e(C)==="password"&&!e(O)&&await he())}async function de(o){o.key==="Enter"&&await xe()}Fe();var ce=gt(),we=p(ce),Ce=s(p(we),2);Ye(Ce,{get value(){return e(N)},set value(o){t(N,o)},children:(o,H)=>{var W=pt(),se=J(W);Ge(se,{class:"w-full grid grid-cols-2 gap-2 bg-neutral-900 rounded-md p-1",children:(X,be)=>{var E=Ze(),k=J(E);Se(k,{value:"login",class:"data-[state=active]:bg-black data-[state=active]:text-white rounded-md py-1",children:(j,L)=>{_();var P=h("Login");r(j,P)},$$slots:{default:!0}});var K=s(k,2);Se(K,{value:"register",class:"data-[state=active]:bg-black data-[state=active]:text-white rounded-md py-1",children:(j,L)=>{_();var P=h("Register");r(j,P)},$$slots:{default:!0}}),r(X,E)},$$slots:{default:!0}});var oe=s(se,2);Te(oe,{value:"login",class:"space-y-4 pt-4",children:(X,be)=>{var E=ct(),k=J(E);{var K=y=>{var m=ot(),$=J(m);{var Q=a=>{var l=rt(),i=p(l);Y(i,{children:(Z,v)=>{_();var w=h("Recently used accounts");r(Z,w)},$$slots:{default:!0}});var le=s(i,2);ke(le,5,()=>e(R),Pe,(Z,v)=>{var w=at(),b=p(w);b.__click=[et,c,v,n];var ve=p(b,!0);u(b);var pe=s(b,2);pe.__click=[tt,v,R],u(w),ee(()=>te(ve,e(v))),r(Z,w)}),u(le),u(l),r(a,l)};I($,a=>{e(R),ye(()=>e(R).length>0)&&a(Q)})}var d=s($,2),q=p(d);Y(q,{for:"email",children:(a,l)=>{_();var i=h("Email");r(a,i)},$$slots:{default:!0}});var M=s(q,2);ae(M,{id:"email",type:"email",oninput:()=>t(n,""),onkeydown:$e,class:"bg-neutral-900 border-neutral-800 text-white placeholder-neutral-500",get value(){return e(c)},set value(a){t(c,a)},$$legacy:!0});var U=s(M,2);{var z=a=>{var l=st(),i=p(l,!0);u(l),ee(()=>te(i,e(n))),r(a,l)};I(U,a=>{e(n)&&a(z)})}u(d);var B=s(d,2);ie(B,{class:"w-full mt-2 transition duration-150 active:scale-95",onclick:_e,children:(a,l)=>{_();var i=h("Continue");r(a,i)},$$slots:{default:!0}}),r(y,m)},j=(y,m)=>{{var $=d=>{var q=lt();r(d,q)},Q=(d,q)=>{{var M=U=>{var z=dt(),B=J(z),a=p(B);Y(a,{for:"password",children:(v,w)=>{_();var b=h("Password");r(v,b)},$$slots:{default:!0}});var l=s(a,2);ae(l,{id:"password",type:"password",oninput:()=>t(n,""),onkeydown:$e,class:"bg-neutral-900 border-neutral-800 text-white placeholder-neutral-500",get value(){return e(S)},set value(v){t(S,v)},$$legacy:!0});var i=s(l,2);{var le=v=>{var w=it(),b=p(w,!0);u(w),ee(()=>te(b,e(n))),r(v,w)};I(i,v=>{e(n)&&v(le)})}u(B);var Z=s(B,2);ie(Z,{class:"w-full mt-2 transition duration-150 active:scale-95",get disabled(){return e(O)},onclick:async()=>{await he()},children:(v,w)=>{var b=Ke(),ve=J(b);{var pe=F=>{var ge=nt();r(F,ge)},Oe=F=>{var ge=h("Sign In");r(F,ge)};I(ve,F=>{e(O)?F(pe):F(Oe,!1)})}r(v,b)},$$slots:{default:!0}}),r(U,z)};I(d,U=>{e(C)==="password"&&U(M)},q)}};I(y,d=>{e(C)==="loading"?d($):d(Q,!1)},m)}};I(k,y=>{e(C)==="email"?y(K):y(j,!1)})}var L=s(k,2);We(L,{class:"my-6 border-neutral-800"});var P=s(L,4);ke(P,5,()=>Ee,Pe,(y,m)=>{ie(y,{variant:"outline",class:"w-full border-neutral-800 text-white hover:bg-neutral-900 transition duration-150 active:scale-95",onclick:async()=>{if(e(m).id==="hardware_token"){if(t(n,""),!ne(e(c))){t(n,"Please enter a valid email first");return}try{await Be(e(c))}catch($){t(n,$.message)}}else t(n,"This login method is not yet implemented.")},children:($,Q)=>{_();var d=h();ee(()=>te(d,(e(m),ye(()=>e(m).label)))),r($,d)},$$slots:{default:!0}})}),u(P),r(X,E)},$$slots:{default:!0}});var ue=s(oe,2);Te(ue,{value:"register",class:"space-y-4 pt-4",children:(X,be)=>{var E=vt(),k=J(E),K=p(k);Y(K,{for:"register-username",children:(a,l)=>{_();var i=h("Username");r(a,i)},$$slots:{default:!0}});var j=s(K,2);ae(j,{id:"register-username",type:"text",oninput:()=>t(x,""),onkeydown:de,class:"bg-neutral-900 border-neutral-800 text-white placeholder-neutral-500",get value(){return e(A)},set value(a){t(A,a)},$$legacy:!0}),u(k);var L=s(k,2),P=p(L);Y(P,{for:"register-email",children:(a,l)=>{_();var i=h("Email");r(a,i)},$$slots:{default:!0}});var y=s(P,2);ae(y,{id:"register-email",type:"email",oninput:()=>t(x,""),onkeydown:de,class:"bg-neutral-900 border-neutral-800 text-white placeholder-neutral-500",get value(){return e(T)},set value(a){t(T,a)},$$legacy:!0}),u(L);var m=s(L,2),$=p(m);Y($,{for:"register-password",children:(a,l)=>{_();var i=h("Password");r(a,i)},$$slots:{default:!0}});var Q=s($,2);ae(Q,{id:"register-password",type:"password",oninput:()=>t(x,""),onkeydown:de,class:"bg-neutral-900 border-neutral-800 text-white placeholder-neutral-500",get value(){return e(D)},set value(a){t(D,a)},$$legacy:!0}),u(m);var d=s(m,2),q=p(d);Ve(q,{id:"tos",get checked(){return e(re)},set checked(a){t(re,a)},$$legacy:!0}),_(2),u(d);var M=s(d,2);{var U=a=>{var l=ut(),i=p(l,!0);u(l),ee(()=>te(i,e(x))),r(a,l)};I(M,a=>{e(x)&&a(U)})}var z=s(M,2);const B=De(()=>!e(re));ie(z,{class:"w-full mt-2 transition duration-150 active:scale-95",onclick:xe,get disabled(){return e(B)},children:(a,l)=>{_();var i=h("Create Account");r(a,i)},$$slots:{default:!0}}),r(X,E)},$$slots:{default:!0}}),r(o,W)},$$slots:{default:!0},$$legacy:!0}),u(we),u(ce),r(G,ce),Ae()}ze(["click"]);export{Rt as component,Ot as universal};
